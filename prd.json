{
  "name": "atproto-agent-network",
  "description": "Decentralized agent communication and memory network on Cloudflare",
  "version": "0.0.1",
  "stories": [
    {
      "id": "install-vitest",
      "title": "Install Vitest and create root config",
      "issue": 24,
      "priority": 1,
      "validationCommand": "bun test 2>&1 | grep -qE '(No test files found|✓)' && echo PASS",
      "files": ["package.json", "vitest.config.ts"],
      "estimatedMinutes": 15
    },
    {
      "id": "identity-tests",
      "title": "Create first unit test for identity.ts",
      "issue": 25,
      "priority": 2,
      "validationCommand": "bun test packages/core/src/identity.test.ts",
      "files": ["packages/core/src/identity.test.ts"],
      "estimatedMinutes": 20,
      "dependsOn": ["install-vitest"]
    },
    {
      "id": "vitest-workspace",
      "title": "Create vitest workspace config",
      "issue": 26,
      "priority": 3,
      "validationCommand": "bun test packages/core 2>&1 | grep -q '✓'",
      "files": ["vitest.workspace.ts", "packages/core/vitest.config.ts"],
      "estimatedMinutes": 15,
      "dependsOn": ["identity-tests"]
    },
    {
      "id": "turbo-test-task",
      "title": "Add turbo task for test",
      "issue": 27,
      "priority": 4,
      "validationCommand": "bun turbo test --filter=core 2>&1 | grep -qE '(✓|passed)'",
      "files": ["turbo.json", "packages/core/package.json"],
      "estimatedMinutes": 15,
      "dependsOn": ["vitest-workspace"]
    },
    {
      "id": "ci-workflow",
      "title": "Add CI workflow",
      "issue": 18,
      "priority": 5,
      "validationCommand": "test -f .github/workflows/ci.yml && echo PASS",
      "files": [".github/workflows/ci.yml"],
      "estimatedMinutes": 20,
      "dependsOn": ["turbo-test-task"]
    },
    {
      "id": "generate-x25519",
      "title": "Implement generateX25519Keypair",
      "issue": 28,
      "priority": 6,
      "validationCommand": "bun test packages/core/src/crypto.test.ts --testNamePattern='generateX25519Keypair'",
      "files": ["packages/core/src/crypto.ts", "packages/core/src/crypto.test.ts"],
      "estimatedMinutes": 30,
      "dependsOn": ["turbo-test-task"]
    },
    {
      "id": "generate-ed25519",
      "title": "Implement generateEd25519Keypair",
      "issue": 29,
      "priority": 7,
      "validationCommand": "bun test packages/core/src/crypto.test.ts --testNamePattern='generateEd25519Keypair'",
      "files": ["packages/core/src/crypto.ts", "packages/core/src/crypto.test.ts"],
      "estimatedMinutes": 20,
      "dependsOn": ["generate-x25519"]
    },
    {
      "id": "export-public-key",
      "title": "Implement exportPublicKey",
      "issue": 30,
      "priority": 8,
      "validationCommand": "bun test packages/core/src/crypto.test.ts --testNamePattern='exportPublicKey'",
      "files": ["packages/core/src/crypto.ts", "packages/core/src/crypto.test.ts"],
      "estimatedMinutes": 30,
      "dependsOn": ["generate-x25519"]
    },
    {
      "id": "derive-shared-secret",
      "title": "Implement deriveSharedSecret",
      "issue": 31,
      "priority": 9,
      "validationCommand": "bun test packages/core/src/crypto.test.ts --testNamePattern='deriveSharedSecret'",
      "files": ["packages/core/src/crypto.ts", "packages/core/src/crypto.test.ts"],
      "estimatedMinutes": 20,
      "dependsOn": ["generate-x25519"]
    }
  ],
  "sprints": [
    {
      "id": "sprint-0",
      "name": "Testing Foundation",
      "goal": "Vitest + CI working across monorepo",
      "stories": ["install-vitest", "identity-tests", "vitest-workspace", "turbo-test-task", "ci-workflow"],
      "estimatedHours": 1.5,
      "hitlGate": null
    },
    {
      "id": "sprint-1",
      "name": "Crypto Primitives",
      "goal": "X25519 + Ed25519 key generation and exchange",
      "stories": ["generate-x25519", "generate-ed25519", "export-public-key", "derive-shared-secret"],
      "estimatedHours": 2,
      "hitlGate": "Security review: verify crypto implementation is correct"
    }
  ],
  "loopConfig": {
    "maxIterations": 12,
    "validationTimeout": 60,
    "autoCommit": true,
    "commitPrefix": "feat|test|chore",
    "branchPrefix": "feat/",
    "onStoryComplete": {
      "updateParentCheckbox": true,
      "addPRLink": true
    },
    "retrospective": {
      "enabled": true,
      "afterSprint": true,
      "issueTemplate": 20
    },
    "gardening": {
      "updateBlockedIssues": true,
      "closeParentWhenChildrenDone": true
    }
  },
  "labels": {
    "ready": "agent/ready",
    "claimed": "agent/claimed",
    "blocked": "agent/blocked",
    "review": "agent/review"
  }
}
